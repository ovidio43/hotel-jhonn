$(document).ready(function(){$(".default-date").Zebra_DatePicker();$("#date-start").Zebra_DatePicker({direction:true,pair:$("#date-end"),always_visible:$("#caledar-visible1")});$("#date-end").Zebra_DatePicker({direction:1,always_visible:$("#caledar-visible2")});$("body").on("click",".Zebra_DatePicker",function(){var c=$("#date-start").val();var b=$("#date-end").val();var e=getDias(c,b);if(!isNaN(e)){$("#dias").val(e);$("#total").val(getTotal());var d=parseFloat($("#total").val());var a=parseFloat($("#monto").val());$("#saldo").val(getSaldo(d,a))}});$(".a-delete").on("click",function(){var a=confirm("Se Eliminará el Item Seleccionado!!!");if(a==false){return false}else{$(this).next("form").submit()}});$("#link-closeSession").on("click",function(a){a.preventDefault();$(this).parent().submit()});$("body").on("click",".get-list",function(b){b.preventDefault();var a=$(this).attr("href");$(this).parent().siblings().removeClass("active");$(this).parent().addClass("active");sendRequest(a,"GET")});$("body").on("click",".new-item",function(b){b.preventDefault();var a=$(this).attr("href");sendRequest(a,"GET")});$("body").on("submit",".form-new-item",function(c){c.preventDefault();var a=$(this).attr("action");var b=$(this).serialize();sendRequest(a,"POST",b)});$("body").on("click","#add-price",function(c){c.preventDefault();var d=$(this);d.hide();d.next().show();var b=$("input#prices").val();var a=d.attr("href");b++;$.get(a+"/"+b,function(e){d.parent().parent().siblings("#content-button").before(e)}).complete(function(){$("input#prices").val(b);d.next().hide();d.show()})});$("body").on("click",".remove-price",function(b){b.preventDefault();$(this).parent().remove();var a=$("input#prices").val();a--;$("input#prices").val(a)});$("body").on("click",".delete-price",function(d){d.preventDefault();var f=$(this);var b=f.attr("href");var c=$("input#prices").val();var a=confirm("Se Eliminará el precio seleccionado!!!");if(a){$.get(b,function(e){if(e=="ok"){f.parent().remove();c--;$("input#prices").val(c)}})}});$("body").on("click","button.detail-close",function(){window.location="create"});$("body").on("click","button.close",function(){$("#loginModal").removeClass("show")});$("body").on("click","input[name=id_precio]",function(){$("#id_moneda").val($(this).attr("moneda_id"));$("#total").val(getTotal());var b=parseFloat($("#total").val());var a=parseFloat($("#monto").val());$("#saldo").val(getSaldo(b,a))});$("body").on("focusout","#monto",function(a){if(isNaN(parseFloat(($(this).val())))){$(this).val(0)}});$("body").on("keyup","#monto",function(c){var b=parseFloat($("#total").val());var a=parseFloat($("#monto").val());if(a>b){$("#monto").val(b);a=b}$("#saldo").val(getSaldo(b,a))});$("body").on("click",".realizar-cobro",function(b){b.preventDefault();var a=$(this).attr("href");$(".custom-loading").show();$.get(a,function(c){$("#loginModal").empty().append(c)}).complete(function(){$("#loginModal").addClass("show");$(".custom-loading").hide()})});$("body").on("click","#cobrar",function(c){c.preventDefault();var d=$(this);var b=$("#custom-form").serialize();var a=d.attr("href");$(".custom-loading").show();$.post(a,b,function(e){$("tr#"+d.next("input").val()).empty().append(e)}).complete(function(){$("#loginModal").removeClass("show");$(".custom-loading").hide()})});$("body").on("click",".liberar",function(c){c.preventDefault();var d=$(this);var b=d.attr("href");var a=confirm("¿Está Seguro de liberar la Reserva Seleccionada?");if(a){$(".custom-loading").show();$.get(b,function(e){if(e==="ok"){d.parent().parent().remove()}}).complete(function(){$(".custom-loading").hide()})}});$("body").on("click","#nuevo-cliente",function(b){b.preventDefault();var c=$(this);var a=c.attr("href");$(".custom-loading").show();$.get(a,function(d){$("#loginModal").empty().append(d);$("#loginModal").addClass("show")}).complete(function(){$(".custom-loading").hide()})});$("body").on("click","#guardar-cliente",function(a){a.preventDefault();$.post($(this).attr("href"),$("#new-client").serialize(),function(b){if(b==="ok"){$("#loginModal").removeClass("show")}else{$("#loginModal").empty().append(b)}}).complete(function(){$(".custom-loading").hide()})})});function sendRequest(a,c,b){$.ajax({type:c,url:a,cache:false,data:b,beforeSend:function(){$(".custom-loading").show()},success:function(d){$("#content-parmas").empty().append(d);$(".custom-loading").hide()}})}function getSaldo(c,b){var a=0;a=c-b;if(isNaN(a)){a=0}return a}function getTotal(){var b=0;var c=parseFloat($("#dias").val());var a=parseFloat($("input[name=id_precio]:checked").attr("title"));b=(a*c);if(isNaN(b)){b=0}return b}function getDias(a,b){return((new Date(b)-new Date(a))/24/3600000)};