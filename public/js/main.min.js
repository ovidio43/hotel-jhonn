$(document).ready(function(){$(".default-date").Zebra_DatePicker();$("#date-start").Zebra_DatePicker({direction:true,pair:$("#date-end"),always_visible:$("#caledar-visible1")});$("#date-end").Zebra_DatePicker({direction:1,always_visible:$("#caledar-visible2")});$("body").on("click",".Zebra_DatePicker",function(){var d=$("#date-start").val();var c=$("#date-end").val();var f=getDias(d,c);if(!isNaN(f)){$("#dias").val(f);$("#total").val(getTotal());var e=parseFloat($("#total").val());var b=parseFloat($("#monto").val());$("#saldo").val(getSaldo(e,b))}});var a=$("#cliente").attr("rel");$("body").on("focusout","#cliente",function(b){if($(this).val()==""){$("#id_cliente").val("")}});$("#cliente").autocomplete({source:a,minLength:2,select:function(b,c){$("#id_cliente").val(c.item.id)}});$(".a-delete").on("click",function(){var b=confirm("Se Eliminará el Item Seleccionado!!!");if(b==false){return false}else{$(this).next("form").submit()}});$("#link-closeSession").on("click",function(b){b.preventDefault();$(this).parent().submit()});$("body").on("click",".get-list",function(c){c.preventDefault();var b=$(this).attr("href");$(this).parent().siblings().removeClass("active");$(this).parent().addClass("active");sendRequest(b,"GET")});$("body").on("click",".new-item",function(c){c.preventDefault();var b=$(this).attr("href");sendRequest(b,"GET")});$("body").on("submit",".form-new-item",function(d){d.preventDefault();var b=$(this).attr("action");var c=$(this).serialize();sendRequest(b,"POST",c)});$("body").on("click","#add-price",function(d){d.preventDefault();var f=$(this);f.hide();f.next().show();var c=$("input#prices").val();var b=f.attr("href");c++;$.get(b+"/"+c,function(e){f.parent().parent().siblings("#content-button").before(e)}).complete(function(){$("input#prices").val(c);f.next().hide();f.show()})});$("body").on("click",".remove-price",function(c){c.preventDefault();$(this).parent().remove();var b=$("input#prices").val();b--;$("input#prices").val(b)});$("body").on("click",".delete-price",function(f){f.preventDefault();var g=$(this);var c=g.attr("href");var d=$("input#prices").val();var b=confirm("Se Eliminará el precio seleccionado!!!");if(b){$.get(c,function(e){if(e=="ok"){g.parent().remove();d--;$("input#prices").val(d)}})}});$("body").on("click","button.detail-close",function(){window.location="create"});$("body").on("click","button.close",function(){$("#loginModal").removeClass("show")});$("body").on("click","input[name=id_precio]",function(){$("#id_moneda").val($(this).attr("moneda_id"));$("#total").val(getTotal());var c=parseFloat($("#total").val());var b=parseFloat($("#monto").val());$("#saldo").val(getSaldo(c,b))});$("body").on("focusout","#monto",function(b){if(isNaN(parseFloat(($(this).val())))){$(this).val(0)}});$("body").on("keyup","#monto",function(d){var c=parseFloat($("#total").val());var b=parseFloat($("#monto").val());if(b>c){$("#monto").val(c);b=c}$("#saldo").val(getSaldo(c,b))});$("body").on("click",".realizar-cobro",function(c){c.preventDefault();var b=$(this).attr("href");$(".custom-loading").show();$.get(b,function(d){$("#loginModal").empty().append(d)}).complete(function(){$("#loginModal").addClass("show");$(".custom-loading").hide()})});$("body").on("click","#cobrar",function(d){d.preventDefault();var f=$(this);var c=$("#custom-form").serialize();var b=f.attr("href");$(".custom-loading").show();$.post(b,c,function(e){$("tr#"+f.next("input").val()).empty().append(e)}).complete(function(){$("#loginModal").removeClass("show");$(".custom-loading").hide()})});$("body").on("click",".liberar",function(d){d.preventDefault();var f=$(this);var c=f.attr("href");var b=confirm("¿Está Seguro de liberar la Reserva Seleccionada?");if(b){$(".custom-loading").show();$.get(c,function(e){if(e==="ok"){f.parent().parent().remove()}}).complete(function(){$(".custom-loading").hide()})}});$("body").on("click",".pasar-cuenta",function(d){d.preventDefault();var f=$(this);var c=f.attr("href");var b=confirm("¿Está seguro de pasar a una Cuenta por Cobrar?");if(b){$(".custom-loading").show();$.get(c,function(e){f.parent().parent().empty().append(e)}).complete(function(){$(".custom-loading").hide()})}});$("body").on("click","#nuevo-cliente",function(b){b.preventDefault();$("#loginModal").addClass("show")});$("body").on("click","#guardar-cliente",function(b){b.preventDefault();$(".custom-loading").addClass("show");$.post($(this).attr("href"),$("#new-client").serialize(),function(c){if(c==="ok"){$("#loginModal").removeClass("show");limpiarformulario($("#new-client"))}else{$("#loginModal").empty().append(c)}}).complete(function(){$(".custom-loading").removeClass("show")})})});function sendRequest(a,c,b){$.ajax({type:c,url:a,cache:false,data:b,beforeSend:function(){$(".custom-loading").show()},success:function(d){$("#content-parmas").empty().append(d);$(".custom-loading").hide()}})}function getSaldo(c,b){var a=0;a=c-b;if(isNaN(a)){a=0}return a}function getTotal(){var b=0;var c=parseFloat($("#dias").val());var a=parseFloat($("input[name=id_precio]:checked").attr("title"));b=(a*c);if(isNaN(b)){b=0}return b}function getDias(a,b){return((new Date(b)-new Date(a))/24/3600000)}function limpiarformulario(a){jQuery(a).find("input").each(function(){switch(this.type){case"password":case"text":case"file":$(this).val("");break;case"checkbox":case"radio":this.checked=false}});$(a).find("select").each(function(){$("#"+this.id+" option[value=0]").attr("selected",true)});$(a).find("textarea").each(function(){$(this).val("")})};