$(document).ready(function(){$("#date-start").Zebra_DatePicker({direction:true,pair:$("#date-end"),always_visible:$("#caledar-visible1")});$("#date-end").Zebra_DatePicker({direction:1,always_visible:$("#caledar-visible2")});$("body").on("click",".Zebra_DatePicker",function(){var b=$("#date-start").val();var a=$("#date-end").val();var c=getDias(b,a);if(!isNaN(c)){$("#dias").val(c);$("#total").val(getTotal($("input[name=id_moneda]:checked").attr("value")));calcularSaldo()}});$(".a-delete").on("click",function(){var a=confirm("Se Eliminará el Item Seleccionado!!!");if(a==false){return false}else{$(this).next("form").submit()}});$("#link-closeSession").on("click",function(a){a.preventDefault();$(this).parent().submit()});$("body").on("click",".get-list",function(b){b.preventDefault();var a=$(this).attr("href");$(this).parent().siblings().removeClass("active");$(this).parent().addClass("active");sendRequest(a,"GET")});$("body").on("click",".new-item",function(b){b.preventDefault();var a=$(this).attr("href");sendRequest(a,"GET")});$("body").on("submit",".form-new-item",function(c){c.preventDefault();var a=$(this).attr("action");var b=$(this).serialize();sendRequest(a,"POST",b)});$("body").on("click","#add-price",function(c){c.preventDefault();var d=$(this);d.hide();d.next().show();var b=$("input#prices").val();var a=d.attr("href");b++;$.get(a+"/"+b,function(e){d.parent().parent().siblings("#content-button").before(e)}).complete(function(){$("input#prices").val(b);d.next().hide();d.show()})});$("body").on("click",".remove-price",function(b){b.preventDefault();$(this).parent().remove();var a=$("input#prices").val();a--;$("input#prices").val(a)});$("body").on("click",".delete-price",function(d){d.preventDefault();var f=$(this);var b=f.attr("href");var c=$("input#prices").val();var a=confirm("Se Eliminará el precio seleccionado!!!");if(a){$.get(b,function(e){if(e=="ok"){f.parent().remove();c--;$("input#prices").val(c)}})}});$("body").on("click","button.close",function(){window.location="create"});$(".only-numeric").keypress(function(c){var a=(typeof c.which=="number")?c.which:c.keyCode;switch(a){case 8:case 0:return true;default:}var b=String.fromCharCode(a);if(!b.match("[0-9]|.")){return false}if(b=="."&&this.value.length==0){return false}if(b=="."&&this.value.indexOf(".")!=-1){return false}if(this.value.indexOf(".")!=-1&&this.value[0]=="0"){this.value=this.value.substr(1)}return true})});function sendRequest(a,c,b){$.ajax({type:c,url:a,cache:false,data:b,beforeSend:function(){$(".custom-loading").show()},success:function(d){$("#content-parmas").empty().append(d);$(".custom-loading").hide()}})}function calcularSaldo(){var c=parseFloat($("#total").val());var b=parseFloat($("#monto").val());var a=0;a=c-b;$("#saldo").val(a)}function getTotal(d){var a,b=0;var c=parseFloat($("#dias").val());$("input.cb-hab").each(function(){if($(this).is(":checked")){a=$(this).siblings().children("p.moneda-"+d).children("input").val();if(typeof(a)!=="undefined"){b+=parseFloat(a)}else{$(this).attr("checked",false);alert("No hay moneda asociada a la habitación "+$(this).siblings().children().first().text())}}});b=b*c;return b}function getDias(a,b){return((new Date(b)-new Date(a))/24/3600000)};